{% extends "XTeamPlatformBundle::layout.html.twig" %}

{% block title %}
    Question {{ parent() }}
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/questionresponse.css') }}">
{% endblock %}

{% block content %}
    <!-- begin page-content container -->
    <div class='container'>
        <div class='row'>
            <!-- begin left content column -->
            <div class="col s12 m12 l8 left usrCol question_block">
                <div class="currentQuestion">
                    <h4><span>{{ question.titre }}</span></h4>
                </div>
                <!--begin question input row -->
                <!--begin user avatar column -->
                <div id="question" class="section qr">
                    <div class="row">
                        <div class="col s2">
                            <img src="{{ asset('img/fosuser.jpg') }}" id="avatar" alt="User Avatar"
                                 class="circle image-responsive  hide-on-med-and-down">
                        </div>
                        <!--end user avatar column -->
                        <!--begin question column -->
                        <div class="col s10 m9 question">
                            <div class="row">
                                <div class="col s7">
                                    <p>{{ question.user }}</p>
                                </div>
                                <div class="col s5">
                                    <small>Postée
                                        le {% if question.date %}{{ question.date|date('d-m-Y à H:i') }}{% endif %}</small>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <p>{{ question.question }}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s6">
                                    <a class="btn-floating btn-large teal tooltipped" href="#responseForm"
                                       data-position="right" data-delay="50"
                                       data-tooltip="Repondre">
                                        <i class="large material-icons">reply</i>
                                    </a>
                                </div>
                                <div class="col s6 fabbtn-wrapper" id="asker">
                                    <div class="fixed-action-btn horizontal click-to-toggle" id="fabBtn">
                                        <a class="btn-floating btn-medium teal">
                                            <i class="large material-icons">menu</i>
                                        </a>
                                        <ul>
                                            <li><a class="btn-floating red tooltipped" data-position="bottom" data-delay="50"
                                                   data-tooltip="inappropriate"><i class="material-icons">report_problem</i></a>
                                            </li>
                                            <li><a class="btn-floating yellow darken-1 tooltipped" data-position="bottom" data-delay="50"
                                                   data-tooltip="Duplicate question"><i
                                                            class="material-icons">cached</i></a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s11">
                                    <ul class="collapsible" data-collapsible="accordion" id="commentaire">
                                        <li>
                                            <div class="collapsible-header"><i class="material-icons">format_quote</i>Commentaires
                                            </div>
                                            <div class="collapsible-body">
                                                <div class="row">
                                                    <div class="col s12">
                                                        <div class="card-panel">
                                                            <span>usr1</span><br>
                                                            <p id="comments"></p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="input-field col s10">
                                                        <textarea id="textarea1" class="materialize-textarea"></textarea>
                                                        <label for="textarea1">Textarea</label>
                                                    </div>
                                                </div>
                                                <button class="btn" type="submit" name="commentSubmit">Comment
                                                    <i class="material-icons right">send</i>
                                                </button>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--begin left column -->
                {% for response in question.responses %}
                    <div id="response" class="section qr response_block">
                        <div class="row">
                            <!--begin user avatar column -->
                            <div class="col s2" id="avatarCol">
                                <div class="row" id="avatarRow">
                                    <img src="{{ asset('img/fosresponder.jpg') }}" id="avatar" alt="User Avatar"
                                         class="image-responsive hide-on-med-and-down">
                                </div>
                                <div class="row">
                                    <div class="col s12 center-align">
                                        <a id='karmabtn' class="btn-floating hoverable waves-effect waves-orange teal-light"><span>30</span></a>
                                    </div>
                                </div>
                            </div>
                            <!--end user avatar column -->
                            <!--begin response column -->
                            <div class="col s10 m9 response">
                                <div class="row">
                                    <div class="col s7">
                                        <p>{{ response.user }}</p>
                                    </div>
                                    <div class="col s5">
                                        <small>Postée
                                            le {% if response.date %}{{ response.date|date('d-m-Y à H:i') }}{% endif %}</small>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s12">
                                        <p>{{ response.content }}</p>
                                    </div>
                                    <div class="row">
                                        <div class="fabbtn-wrapper col s6 offset-s6" id="asker">
                                            <div class="fixed-action-btn horizontal click-to-toggle" id="fabBtn">
                                                <a class="btn-floating btn-medium teal">
                                                    <i class="large material-icons">menu</i>
                                                </a>
                                                <ul>
                                                    <li><a class="btn-floating red tooltipped" data-position="bottom" data-delay="50"
                                                           data-tooltip="Report this question as inappropriate"><i class="material-icons">report_problem</i></a>
                                                    </li>
                                                    <li><a class="btn-floating yellow darken-1 tooltipped" data-position="bottom" data-delay="50"
                                                           data-tooltip="Report this question as a duplicate"><i
                                                                    class="material-icons">cached</i></a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col s11">
                                            <ul class="collapsible" data-collapsible="accordion" id="commentaire">
                                                <li>
                                                    <div class="collapsible-header"><i class="material-icons">format_quote</i>{{ response.comments|length }}  Commentaires
                                                    </div>
                                                    <div class="collapsible-body">
                                                        <div class="row">
                                                            <div class="col s12">
                                                                {% for comment in response.comments %}
                                                                <div class="card-panel">
                                                                    <span>{{ comment.user }}</span><br>
                                                                    <p id="comments">{{ comment.content }}</p>
                                                                </div>
                                                                {% endfor %}
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class= "col s10">
                                                                {% form_theme comment_form '::fields.html.twig' %}
                                                                {{ form_start(comment_form) }}
                                                                {{ form_widget(comment_form) }}
                                                                <input type="submit" value="Commenter" class="btn waves-effect waves-light"/>
                                                                {{ form_end(comment_form) }}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}

                <div class="divider dividerMargin" id="formSpacer"></div>
                <h4>Apportez votre réponse</h4>
                <div id="responseForm" class="section scrollspy">
                    <div class="row">
                        {% form_theme addResponse_form '::fields.html.twig' %}
                        {{ form_start(addResponse_form) }}
                        {{ form_widget(addResponse_form) }}
                        <input type="submit" value="Poster" class="btn waves-effect waves-light"/>
                        {{ form_end(addResponse_form) }}
                    </div>
                </div>
                <div class="divider dividerMargin"></div>
            </div>

            <!--end left content column-->
            <!--begin user info column-->
            <div class="col m4 l3 rightCol hide-on-med-and-down">
                <div class="card blue-grey darken-1 infoCol">
                    <div class="card-content white-text">
                        <div class="input-field">
                            <input id="search" type="search" required>
                            <label class="label-icon" for="search"><i class="material-icons">search</i></label>
                            <i class="material-icons">close</i>
                        </div>
                        <span class="card-title">{{ app.user }}</span>
                    </div>
                    <div class="card-action">
                        <a href="#">This is a link</a>
                        <a href="#">This is a link</a>
                    </div>
                </div>
            </div>
            <!--end user info column-->

            <!-- end page-content container -->
        </div>
    </div>
{% endblock %}


{% block scripts %}
    {{ parent() }}
    <script src="{{ asset('JS/questionresponse.js') }}"></script>
{% endblock %}